{include file="../Common/header.html"}
<link rel="stylesheet" type="text/css" href="__PUBLIC__/assets/css/member.css" />
<style> 
.am-active a { color:#0e90d2 !important }
.am-u-sm-4,.am-u-sm-8 { padding-left: 0rem; }
.am-form-group .am-u-sm-8 p{ clear:both; height:24px !important ;line-height:24px;}
.am-form-group { margin-bottom: 0px; }
</style>
<div class="hyy">
    <div class="m-wrap">
        <div class="hyy-l fl">
            <img src="__PUBLIC__/assets/images/bg1.png">
        </div>
        <div class="hyy-r fr">
            <div class="ptdl fl" style="width: 370px;">
                <div class="am-tabs">
                    <ul class="am-tabs-nav am-nav am-nav-tabs" style="background: #e6e6e6;">
                        <li class="am-active"><a href="javascript: void(0)"><i class="am-icon-user" style="margin:0px 5px"></i>会员注册</a></li>
                    </ul>
                    <div class="am-tabs-bd" style=" clear:both; padding-top:15px">
                        <div class="am-tab-panel am-active">
                           <form class="am-form am-form-horizontal" name="regi" id='regi' method="post" action="__APP__/Register/doreg">
                                <div class="am-form-group">
                                    <label for="doc-ipt-3" class="am-u-sm-4 am-form-label">会员账户</label>
                                    <div class="am-u-sm-8">
                                        <input type="text" name="username" id="name" placeholder="输入你的会员账户" class="am-fl" style="width:90%" onblur="return checkname();">
                                        <p id="namets" style="width: 150px;height:40px;text-align: left;font-size: 12px;"></p>
                                    </div>
                                </div>
                                <div class="am-form-group">
                                    <label for="doc-ipt-pwd-2" class="am-u-sm-4 am-form-label">登录密码</label>
                                    <div class="am-u-sm-8">
                                        <input required type="password" name="password" id="password" id="password" placeholder="设置登陆密码" onblur="return checkpass();" class="am-fl" minlength="6" maxlength="20"   data-validation-message="密码需为6-20个字符,由字母、数字组成" style="width:90%">
                                        <p id="passwords" style="width: 150px;height:40px;text-align: left;font-size: 12px;"></p>
                                    </div>
                                </div>
								<div class="am-form-group">
                                    <label for="doc-ipt-pwd-2" class="am-u-sm-4 am-form-label">确认密码</label>
                                    <div class="am-u-sm-8">
                                        <input required type="password" name="password" id="password2" id="doc-ipt-pwd-2" placeholder="重复登陆密码" onblur="return checkpasss();" class="am-fl" minlength="6" maxlength="20"   data-validation-message="两次密码不一样,请再次输入密码"  data-equal-to="#password" style="width:90%">
                                        <p id="password1" style="width: 150px;height:40px;text-align: left;font-size: 12px;"></p>
                                    </div>
                                </div>
                                <div class="am-form-group">
                                    <label required for="doc-ipt-pwd-2" class="am-u-sm-4 am-form-label">手机号码</label>
                                    <div class="am-u-sm-8">
                                        <input type="text" id ="Mobile" name="Mobile" maxlength="11" onkeyup="this.value=this.value.replace(/\D/g,'')" id="doc-ipt-pwd-2" placeholder="请输入您的手机号码" class="am-fl" onblur="return checkMobile();" style="width:90%"><p id="mobiles" style="width: 150px;height:40px;text-align: left;font-size: 12px;"></p>
                                    </div>
                                </div>
                                <div class="am-form-group">
                                    <label for="doc-vld-email-2-1" class="am-u-sm-4 am-form-label">邮箱地址</label>
                                    <div class="am-u-sm-8" >
                                        <input required type="email" id ="email" name="email" id="doc-vld-email-2-1" class="am-fl" onblur="return checkemails();"  placeholder="请输入您的邮箱" style="width:90%">
                                        <p id="emails" style="width: 150px;height:40px;text-align: left;font-size: 12px;"></p>
                                    </div>
                                </div>                       
								<div class="am-form-group">
                                    <label for="doc-ipt-pwd-2" class="am-u-sm-4 am-form-label">验证码</label>
                                    <div class="am-u-sm-8">
                                    <div class="am-input-group">
                                        <input required type="text" id="verify" name="verify" id="doc-ipt-pwd-2" placeholder="请输入验证码" class="am-fl" minlength="4" maxlength="4" data-validation-message="请输入4位验证码验证码" onblur="return checkverify();" style="float:left; width:110px;">
                                        <img src="__URL__/verify" id="checkcode" onclick="this.src='__URL__/verify/?id='+Math.random()*5;" style="cursor:pointer;float: right; margin-top: 4px; margin-left:10px;" alt="验证码,看不清楚?请点击刷新验证码" align="absmiddle" />
                                    </div>
									 <p id="verifys" style="width: 150px;height:40px;text-align: left;font-size: 12px;"></p>
                                    </div>
                                </div>
                                <div class="am-form-group">
                                    <label for="doc-vld-email-2-1" class="am-u-sm-4 am-form-label"></label>
                                    <div class="am-u-sm-8">
                                	<input type="checkbox" value="1" id="tosCheckBox" name="xieyi"  checked="checked" style=" float:left"> 同意<span style="color: #666;"><a href="__APP__/Register/xieyi" target="_blank">《订房网用户协议》</a></span> 
                                    </div>
                                </div>                              
                                <div class="am-form-group">
                                    <div class="am-u-sm-12">
                                    	<button type="button" ajaxform data-form="#regi" class="am-btn am-btn-warning am-round" style="padding:8px 80px;font-size: 16px;">同意服务条款并注册</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
//$(function(){
 // $('#regi').validator({
   // onValid: function(validity) {
   //   $(validity.field).closest('.am-form-group').find('.am-alert').hide();
   // },
//    onInValid: function(validity) {
//      var $field = $(validity.field);
//      var $group = $field.closest('.am-form-group');
//      var $alert = $group.find('.am-alert');
      // 使用自定义的提示信息 或 插件内置的提示信息
//      var msg = $field.data('validationMessage') || this.getValidationMessage(validity);
//      if (!$alert.length) {
 //       $alert = $('<div class="am-alert am-alert-danger am-icon-exclamation-circle"></div>').hide().appendTo($group);
 //     }
 //     $alert.html(msg).show();
 //     $alert.css({
 //       display:"inline-block"
 //     });
 //   }
//  });
//});
function callback(rs) {
    alert(rs.msg);
    if (rs.status == 1) {
        window.location.href = "__ROOT__/index.php/Member/index";
    }
}
</script>
<script type="text/javascript">
function checkname()    
{
    var name = document.getElementById("name").value;  
    // var names =document.getElementById("name");
    var ts = document.getElementById("namets");
        if(name.length<3|| name.length>15)  
        {   
            ts.innerHTML ="用户名长度须在3-15之间!";
            ts.style.color="red";
            // names.style.color="red";
            return false;
        }
    $.post("__APP__/Register/checkname",
        {
            username : name
        },
        function(data){
        if(data==1){
            ts.innerHTML ='用户名已存在!';
            ts.style.color='red';
            // names.style.color="red";
            return false;
        }else{
            ts.innerHTML ='OK';
            ts.style.color='green';
            // names.style.color="green";
            return true;           
        }
    });
}
function checkemails()    
{
    var name = $("#email").val();  
    // var names=document.getElementById("email");
    var ts = document.getElementById("emails");
    var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;
    if(!name){
        ts.innerHTML ="不能为空";
        ts.style.color="red"; 
    }
    if(!isEmail(name)){
        ets.innerHTML ="邮箱格式不正确!";
        ets.style.color="red";
        return false;
    } 
    $.post("__APP__/Register/checkemails",
        {
            email : name
        },
        function(data){
        if(data==1){
            ts.innerHTML ='此邮箱已经被使用！';
            ts.style.color='red';
            // names.style.color="red";
            return false;
        }else{
            ts.innerHTML ='OK';
            ts.style.color='green';
            // names.style.color="green";
            return true;           
        }
    });
}
function isEmail(str){
    var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;
    return reg.test(str);
}
function checkMobile()    
{
    var name = document.getElementById("Mobile").value;
    // var names =document.getElementById("Mobile");
    var ts = document.getElementById("mobiles");
    if(name.length<11|| name.length>11)  
    {   
        ts.innerHTML ="请填写11位手机号码！";
        ts.style.color="red";
        // names.style.color="red";
        return false;
    }
    $.post("__APP__/Register/checkMobile",
        {
            Mobile : name
        },
        function(data){
        if(data==1){
            ts.innerHTML ='手机号已存在!';
            ts.style.color='red';
            // names.style.color="red";
            return false;
        }else{
            ts.innerHTML ='OK';
            ts.style.color='green';
            // names.style.color="red";
            return true;           
        }
    });
}
function checkpass()    
{
    var name = document.getElementById("password").value;
    // var names =document.getElementById("password");
    var ts = document.getElementById("passwords");
    if(name.length<6|| name.length>20)  
    {   
        ts.innerHTML ="为6-20位由字母、数字组成";
        ts.style.color="red";
        //names.style.color="red";
        return false;
    }else{
        ts.innerHTML ="OK";
        ts.style.color="green";
        //names.style.color="red";
        return true;  
    }
}
function checkpasss(){
    var name2 = document.getElementById("password2").value;
    // var names =document.getElementById("password2");
    var name = document.getElementById("password").value;
    var ts = document.getElementById("password1");
    if(!name2){
        ts.innerHTML ="不能为空";
        ts.style.color="red"; 
    }else{
		 if(name2!= name)  
			{   
				ts.innerHTML ="两次密码不一样!";
				ts.style.color="red";
				return false;
			}else{
				ts.innerHTML ="OK";
				ts.style.color="green";
				return true;  
			}
	}
}
function checkverify(){
    var name = document.getElementById("verify").value;
    var ts = document.getElementById("verifys");
    if(!name){
        ts.innerHTML ="不能为空";
        ts.style.color="red"; 
    }else{
		$.post("__APP__/Register/checkverify",
			{
				verify : name
			},
			function(data){
			if(data !=1){
				ts.innerHTML ='验证码不正确';
				ts.style.color='red';
				return false;
			}else{
				ts.innerHTML ='ok';
				ts.style.color='green';
				return true;           
			}
		});
	}
}
</script>
{include file="../Common/footer.html"}
